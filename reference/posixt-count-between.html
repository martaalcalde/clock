<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Counting: date-times — posixt-count-between • clock</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Counting: date-times — posixt-count-between"><meta property="og:description" content='This is a POSIXct/POSIXlt method for the date_count_between() generic.
date_count_between() counts the number of precision units between
start and end (i.e., the number of years or months). This count
corresponds to the whole number of units, and will never return a
fractional value.
This is suitable for, say, computing the whole number of years or months
between two dates, accounting for the day of the month and the time of day.
Internally, the date-time is converted to one of the following three clock
types, and the counting is done directly on that type. The choice of type is
based on the most common interpretation of each precision, but is ultimately
a heuristic. See the examples for more information.
Calendrical based counting:
These precisions convert to a year-month-day calendar and count while in that
type.
"year"
"quarter"
"month"


Naive-time based counting:
These precisions convert to a naive-time and count while in that type.
"week"
"day"


Sys-time based counting:
These precisions convert to a sys-time and count while in that type.
"hour"
"minute"
"second"

'><meta property="og:image" content="https://clock.r-lib.org/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">clock</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/clock.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/motivations.html">Motivations for clock</a>
    </li>
    <li>
      <a href="../articles/faq.html">Frequently Asked Questions</a>
    </li>
    <li>
      <a href="../articles/recipes.html">Examples and Recipes</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="dropdown-header">Releases</li>
    <li>
      <a href="https://www.tidyverse.org/blog/2021/03/clock-0-1-0/" class="external-link">Version 0.1.0</a>
    </li>
    <li class="divider">
    <li>
      <a href="../news/index.html">Changelog</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/r-lib/clock/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Counting: date-times</h1>
    <small class="dont-index">Source: <a href="https://github.com/r-lib/clock/blob/HEAD/R/posixt.R" class="external-link"><code>R/posixt.R</code></a></small>
    <div class="hidden name"><code>posixt-count-between.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This is a POSIXct/POSIXlt method for the <code><a href="date_count_between.html">date_count_between()</a></code> generic.</p>
<p><code><a href="date_count_between.html">date_count_between()</a></code> counts the number of <code>precision</code> units between
<code>start</code> and <code>end</code> (i.e., the number of years or months). This count
corresponds to the <em>whole number</em> of units, and will never return a
fractional value.</p>
<p>This is suitable for, say, computing the whole number of years or months
between two dates, accounting for the day of the month and the time of day.</p>
<p>Internally, the date-time is converted to one of the following three clock
types, and the counting is done directly on that type. The choice of type is
based on the most common interpretation of each precision, but is ultimately
a heuristic. See the examples for more information.</p>
<p><em>Calendrical based counting:</em></p>
<p>These precisions convert to a year-month-day calendar and count while in that
type.</p><ul><li><p><code>"year"</code></p></li>
<li><p><code>"quarter"</code></p></li>
<li><p><code>"month"</code></p></li>
</ul><p><em>Naive-time based counting:</em></p>
<p>These precisions convert to a naive-time and count while in that type.</p><ul><li><p><code>"week"</code></p></li>
<li><p><code>"day"</code></p></li>
</ul><p><em>Sys-time based counting:</em></p>
<p>These precisions convert to a sys-time and count while in that type.</p><ul><li><p><code>"hour"</code></p></li>
<li><p><code>"minute"</code></p></li>
<li><p><code>"second"</code></p></li>
</ul></div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="co"># S3 method for POSIXt</span>
<span class="fu"><a href="date_count_between.html">date_count_between</a></span><span class="op">(</span><span class="va">start</span>, <span class="va">end</span>, <span class="va">precision</span>, <span class="va">...</span>, n <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>start, end</dt>
<dd><p><code>[POSIXct / POSIXlt]</code></p>
<p>A pair of date-time vectors. These will be recycled to their common
size.</p></dd>
<dt>precision</dt>
<dd><p><code>[character(1)]</code></p>
<p>One of:</p><ul><li><p><code>"year"</code></p></li>
<li><p><code>"quarter"</code></p></li>
<li><p><code>"month"</code></p></li>
<li><p><code>"week"</code></p></li>
<li><p><code>"day"</code></p></li>
<li><p><code>"hour"</code></p></li>
<li><p><code>"minute"</code></p></li>
<li><p><code>"second"</code></p></li>
</ul></dd>
<dt>...</dt>
<dd><p>These dots are for future extensions and must be empty.</p></dd>
<dt>n</dt>
<dd><p><code>[positive integer(1)]</code></p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>An integer representing the number of <code>precision</code> units between
<code>start</code> and <code>end</code>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p><code>"quarter"</code> is equivalent to <code>"month"</code> precision with <code>n</code> set to <code>n * 3L</code>.</p>
    </div>
    <div id="comparison-direction">
    <h2>Comparison Direction</h2>
    

<p>The computed count has the property that if <code>start &lt;= end</code>, then
<code>start + &lt;count&gt; &lt;= end</code>. Similarly, if <code>start &gt;= end</code>, then
<code>start + &lt;count&gt; &gt;= end</code>. In other words, the comparison direction between
<code>start</code> and <code>end</code> will never change after adding the count to <code>start</code>. This
makes this function useful for repeated count computations at
increasingly fine precisions.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="va">start</span> <span class="op">&lt;-</span> <span class="fu"><a href="date-time-parse.html">date_time_parse</a></span><span class="op">(</span><span class="st">"2000-05-05 02:00:00"</span>, zone <span class="op">=</span> <span class="st">"America/New_York"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">end</span> <span class="op">&lt;-</span> <span class="fu"><a href="date-time-parse.html">date_time_parse</a></span><span class="op">(</span></span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2020-05-05 01:00:00"</span>, <span class="st">"2020-05-05 03:00:00"</span><span class="op">)</span>,</span>
<span class="r-in">  zone <span class="op">=</span> <span class="st">"America/New_York"</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Age in years</span></span>
<span class="r-in"><span class="fu"><a href="date_count_between.html">date_count_between</a></span><span class="op">(</span><span class="va">start</span>, <span class="va">end</span>, <span class="st">"year"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 19 20</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Number of "whole" months between these dates. i.e.</span></span>
<span class="r-in"><span class="co"># `2000-05-05 02:00:00 -&gt; 2020-04-05 02:00:00` is 239 months</span></span>
<span class="r-in"><span class="co"># `2000-05-05 02:00:00 -&gt; 2020-05-05 02:00:00` is 240 months</span></span>
<span class="r-in"><span class="co"># Since `2020-05-05 01:00:00` occurs before the 2nd hour,</span></span>
<span class="r-in"><span class="co"># it gets a count of 239</span></span>
<span class="r-in"><span class="fu"><a href="date_count_between.html">date_count_between</a></span><span class="op">(</span><span class="va">start</span>, <span class="va">end</span>, <span class="st">"month"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 239 240</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Number of seconds between</span></span>
<span class="r-in"><span class="fu"><a href="date_count_between.html">date_count_between</a></span><span class="op">(</span><span class="va">start</span>, <span class="va">end</span>, <span class="st">"second"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 631148400 631155600</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># ---------------------------------------------------------------------------</span></span>
<span class="r-in"><span class="co"># Naive-time VS Sys-time interpretation</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># The difference between whether `start` and `end` are converted to a</span></span>
<span class="r-in"><span class="co"># naive-time vs a sys-time comes into play when dealing with daylight</span></span>
<span class="r-in"><span class="co"># savings.</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Here are two times around a 1 hour DST gap where clocks jumped from</span></span>
<span class="r-in"><span class="co"># 01:59:59 -&gt; 03:00:00</span></span>
<span class="r-in"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="date_time_build.html">date_time_build</a></span><span class="op">(</span><span class="fl">1970</span>, <span class="fl">4</span>, <span class="fl">26</span>, <span class="fl">1</span>, <span class="fl">50</span>, <span class="fl">00</span>, zone <span class="op">=</span> <span class="st">"America/New_York"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="date_time_build.html">date_time_build</a></span><span class="op">(</span><span class="fl">1970</span>, <span class="fl">4</span>, <span class="fl">26</span>, <span class="fl">3</span>, <span class="fl">00</span>, <span class="fl">00</span>, zone <span class="op">=</span> <span class="st">"America/New_York"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># When treated like sys-times, these are considered to be 10 minutes apart,</span></span>
<span class="r-in"><span class="co"># which is the amount of time that would have elapsed if you were watching</span></span>
<span class="r-in"><span class="co"># a clock as it changed between these two times.</span></span>
<span class="r-in"><span class="fu"><a href="date_count_between.html">date_count_between</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="st">"minute"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 10</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Lets add a 3rd date that is ~1 day ahead of these</span></span>
<span class="r-in"><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="date_time_build.html">date_time_build</a></span><span class="op">(</span><span class="fl">1970</span>, <span class="fl">4</span>, <span class="fl">27</span>, <span class="fl">1</span>, <span class="fl">55</span>, <span class="fl">00</span>, zone <span class="op">=</span> <span class="st">"America/New_York"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># When treated like naive-times, `z` is considered to be at least 1 day ahead</span></span>
<span class="r-in"><span class="co"># of `x`, because `01:55:00` is after `01:50:00`. This is probably what you</span></span>
<span class="r-in"><span class="co"># expected.</span></span>
<span class="r-in"><span class="fu"><a href="date_count_between.html">date_count_between</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">z</span>, <span class="st">"day"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># If these were interpreted like sys-times, then `z` would not be considered</span></span>
<span class="r-in"><span class="co"># to be 1 day ahead. That would look something like this:</span></span>
<span class="r-in"><span class="fu"><a href="date_count_between.html">date_count_between</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">z</span>, <span class="st">"second"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 83100</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">trunc</a></span><span class="op">(</span><span class="fu"><a href="date_count_between.html">date_count_between</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">z</span>, <span class="st">"second"</span><span class="op">)</span> <span class="op">/</span> <span class="fl">86400</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># This is because there have only been 83,100 elapsed seconds since `x`,</span></span>
<span class="r-in"><span class="co"># which isn't a full day's worth (86,400 seconds). But we'd generally</span></span>
<span class="r-in"><span class="co"># consider `z` to be 1 day ahead of `x` (and ignore the DST gap), so that is</span></span>
<span class="r-in"><span class="co"># how it is implemented.</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># You can override this by converting directly to sys-time, then using</span></span>
<span class="r-in"><span class="co"># `time_point_count_between()`</span></span>
<span class="r-in"><span class="va">x_st</span> <span class="op">&lt;-</span> <span class="fu"><a href="as_sys_time.html">as_sys_time</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span class="r-in"><span class="va">x_st</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;time_point&lt;sys&gt;&lt;second&gt;[1]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "1970-04-26T06:50:00"</span>
<span class="r-in"></span>
<span class="r-in"><span class="va">z_st</span> <span class="op">&lt;-</span> <span class="fu"><a href="as_sys_time.html">as_sys_time</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span></span>
<span class="r-in"><span class="va">z_st</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;time_point&lt;sys&gt;&lt;second&gt;[1]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "1970-04-27T05:55:00"</span>
<span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="time_point_count_between.html">time_point_count_between</a></span><span class="op">(</span><span class="va">x_st</span>, <span class="va">z_st</span>, <span class="st">"day"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Davis Vaughan, <a href="https://www.rstudio.com" class="external-link"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" width="72"></a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer></div>

  


  

  </body></html>

