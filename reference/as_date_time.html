<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Convert to a date-time — as_date_time • clock</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Convert to a date-time — as_date_time" />
<meta property="og:description" content="as_date_time() is a generic function that converts its input to a date-time
(POSIXct).
There are methods for converting dates (Date), calendars, time points, and
zoned-times to date-times.
For converting to a date, see as_date()." />
<meta property="og:image" content="https://clock.r-lib.org/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">clock</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/clock.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/articles/motivations.html">Motivations for clock</a>
    </li>
    <li>
      <a href="../articles/faq.html">Frequently Asked Questions</a>
    </li>
    <li>
      <a href="../articles/recipes.html">Examples and Recipes</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Releases</li>
    <li>
      <a href="https://www.tidyverse.org/blog/2021/03/clock-0-1-0/">Version 0.1.0</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Changelog</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-lib/clock/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convert to a date-time</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-lib/clock/blob/master/R/posixt.R'><code>R/posixt.R</code></a></small>
    <div class="hidden name"><code>as_date_time.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>as_date_time()</code> is a generic function that converts its input to a date-time
(POSIXct).</p>
<p>There are methods for converting dates (Date), calendars, time points, and
zoned-times to date-times.</p>
<p>For converting to a date, see <code><a href='as_date.html'>as_date()</a></code>.</p>
    </div>

    <pre class="usage"><span class='fu'>as_date_time</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for POSIXt</span>
<span class='fu'>as_date_time</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for Date</span>
<span class='fu'>as_date_time</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>zone</span>, <span class='va'>...</span>, nonexistent <span class='op'>=</span> <span class='cn'>NULL</span>, ambiguous <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>

<span class='co'># S3 method for clock_calendar</span>
<span class='fu'>as_date_time</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>zone</span>, <span class='va'>...</span>, nonexistent <span class='op'>=</span> <span class='cn'>NULL</span>, ambiguous <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>

<span class='co'># S3 method for clock_sys_time</span>
<span class='fu'>as_date_time</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>zone</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for clock_naive_time</span>
<span class='fu'>as_date_time</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>zone</span>, <span class='va'>...</span>, nonexistent <span class='op'>=</span> <span class='cn'>NULL</span>, ambiguous <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>

<span class='co'># S3 method for clock_zoned_time</span>
<span class='fu'>as_date_time</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code>[vector]</code></p>
<p>A vector.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>These dots are for future extensions and must be empty.</p></td>
    </tr>
    <tr>
      <th>zone</th>
      <td><p><code>[character(1)]</code></p>
<p>The zone to convert to.</p></td>
    </tr>
    <tr>
      <th>nonexistent</th>
      <td><p><code>[character / NULL]</code></p>
<p>One of the following nonexistent time resolution strategies, allowed to be
either length 1, or the same length as the input:</p><ul>
<li><p><code>"roll-forward"</code>: The next valid instant in time.</p></li>
<li><p><code>"roll-backward"</code>: The previous valid instant in time.</p></li>
<li><p><code>"shift-forward"</code>: Shift the nonexistent time forward by the size of
the daylight saving time gap.</p></li>
<li><p><code>"shift-backward</code>: Shift the nonexistent time backward by the size of
the daylight saving time gap.</p></li>
<li><p><code>"NA"</code>: Replace nonexistent times with <code>NA</code>.</p></li>
<li><p><code>"error"</code>: Error on nonexistent times.</p></li>
</ul>

<p>Using either <code>"roll-forward"</code> or <code>"roll-backward"</code> is generally
recommended over shifting, as these two strategies maintain the
<em>relative ordering</em> between elements of the input.</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.</p>
<p>If <code><a href='https://rdrr.io/r/base/options.html'>getOption("clock.strict")</a></code> is <code>TRUE</code>, <code>nonexistent</code> must be supplied
and cannot be <code>NULL</code>. This is a convenient way to make production code
robust to nonexistent times.</p></td>
    </tr>
    <tr>
      <th>ambiguous</th>
      <td><p><code>[character / zoned_time / POSIXct / list(2) / NULL]</code></p>
<p>One of the following ambiguous time resolution strategies, allowed to be
either length 1, or the same length as the input:</p><ul>
<li><p><code>"earliest"</code>: Of the two possible times, choose the earliest one.</p></li>
<li><p><code>"latest"</code>: Of the two possible times, choose the latest one.</p></li>
<li><p><code>"NA"</code>: Replace ambiguous times with <code>NA</code>.</p></li>
<li><p><code>"error"</code>: Error on ambiguous times.</p></li>
</ul>

<p>Alternatively, <code>ambiguous</code> is allowed to be a zoned_time (or POSIXct) that
is either length 1, or the same length as the input. If an ambiguous time
is encountered, the zoned_time is consulted. If the zoned_time corresponds
to a naive_time that is also ambiguous <em>and</em> uses the same daylight saving
time transition point as the original ambiguous time, then the offset of
the zoned_time is used to resolve the ambiguity. If the ambiguity cannot be
resolved by consulting the zoned_time, then this method falls back to
<code>NULL</code>.</p>
<p>Finally, <code>ambiguous</code> is allowed to be a list of size 2, where the first
element of the list is a zoned_time (as described above), and the second
element of the list is an ambiguous time resolution strategy to use when
the ambiguous time cannot be resolved by consulting the zoned_time.
Specifying a zoned_time on its own is identical to <code>list(&lt;zoned_time&gt;, NULL)</code>.</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.</p>
<p>If <code><a href='https://rdrr.io/r/base/options.html'>getOption("clock.strict")</a></code> is <code>TRUE</code>, <code>ambiguous</code> must be supplied and
cannot be <code>NULL</code>. Additionally, <code>ambiguous</code> cannot be specified as a
zoned_time on its own, as this implies <code>NULL</code> for ambiguous times that the
zoned_time cannot resolve. Instead, it must be specified as a list
alongside an ambiguous time resolution strategy as described above. This is
a convenient way to make production code robust to ambiguous times.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A date-time with the same length as <code>x</code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Note that clock always assumes that R's Date class is naive, so converting
a Date to a POSIXct will always attempt to retain the printed year, month,
and day. Where possible, the resulting time will be at midnight (<code>00:00:00</code>),
but in some rare cases this is not possible due to daylight saving time. If
that issue ever arises, an error will be thrown, which can be resolved by
explicitly supplying <code>nonexistent</code> or <code>ambiguous</code>.</p>
<p>This is not a drop-in replacement for <code><a href='https://rdrr.io/r/base/as.POSIXlt.html'>as.POSIXct()</a></code>, as it only converts a
limited set of types to POSIXct. For parsing characters as date-times, see
<code><a href='date-time-parse.html'>date_time_parse()</a></code>. For converting numerics to date-times, see
<code><a href='https://vctrs.r-lib.org/reference/new_date.html'>vctrs::new_datetime()</a></code> or continue to use <code><a href='https://rdrr.io/r/base/as.POSIXlt.html'>as.POSIXct()</a></code>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span><span class='op'>(</span><span class='st'>"2019-01-01"</span><span class='op'>)</span>

<span class='co'># `as.POSIXct()` will always treat Date as UTC, but will show the result</span>
<span class='co'># of the conversion in your system time zone, which can be somewhat confusing</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='fu'>rlang</span><span class='fu'>::</span><span class='fu'><a href='https://rlang.r-lib.org/reference/is_installed.html'>is_installed</a></span><span class='op'>(</span><span class='st'>"withr"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='fu'>withr</span><span class='fu'>::</span><span class='fu'><a href='https://withr.r-lib.org/reference/with_timezone.html'>with_timezone</a></span><span class='op'>(</span><span class='st'>"UTC"</span>, <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/as.POSIXlt.html'>as.POSIXct</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
  <span class='fu'>withr</span><span class='fu'>::</span><span class='fu'><a href='https://withr.r-lib.org/reference/with_timezone.html'>with_timezone</a></span><span class='op'>(</span><span class='st'>"Europe/Paris"</span>, <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/as.POSIXlt.html'>as.POSIXct</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
  <span class='fu'>withr</span><span class='fu'>::</span><span class='fu'><a href='https://withr.r-lib.org/reference/with_timezone.html'>with_timezone</a></span><span class='op'>(</span><span class='st'>"America/New_York"</span>, <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/as.POSIXlt.html'>as.POSIXct</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>}</span>
</div><div class='output co'>#&gt; [1] "2019-01-01 UTC"
#&gt; [1] "2019-01-01 01:00:00 CET"
#&gt; [1] "2018-12-31 19:00:00 EST"</div><div class='input'>
<span class='co'># `as_date_time()` will treat Date as naive, which means that the original</span>
<span class='co'># printed date will attempt to be kept wherever possible, no matter the</span>
<span class='co'># time zone. The time will be set to midnight.</span>
<span class='fu'>as_date_time</span><span class='op'>(</span><span class='va'>x</span>, <span class='st'>"UTC"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "2019-01-01 UTC"</div><div class='input'><span class='fu'>as_date_time</span><span class='op'>(</span><span class='va'>x</span>, <span class='st'>"Europe/Paris"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "2019-01-01 CET"</div><div class='input'><span class='fu'>as_date_time</span><span class='op'>(</span><span class='va'>x</span>, <span class='st'>"America/New_York"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "2019-01-01 EST"</div><div class='input'>
<span class='co'># In some rare cases, this is not possible.</span>
<span class='co'># For example, in Asia/Beirut, there was a DST gap from</span>
<span class='co'># 2021-03-27 23:59:59 -&gt; 2021-03-28 01:00:00,</span>
<span class='co'># skipping the 0th hour entirely.</span>
<span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span><span class='op'>(</span><span class='st'>"2021-03-28"</span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/try.html'>try</a></span><span class='op'>(</span><span class='fu'>as_date_time</span><span class='op'>(</span><span class='va'>x</span>, <span class='st'>"Asia/Beirut"</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Error : Nonexistent time due to daylight saving time at location 1.
#&gt; <span style='color: #0000BB;'>ℹ</span> Resolve nonexistent time issues by specifying the `nonexistent` argument.</div><div class='input'>
<span class='co'># To resolve this, set a `nonexistent` time resolution strategy</span>
<span class='fu'>as_date_time</span><span class='op'>(</span><span class='va'>x</span>, <span class='st'>"Asia/Beirut"</span>, nonexistent <span class='op'>=</span> <span class='st'>"roll-forward"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "2021-03-28 01:00:00 EEST"</div><div class='input'>

<span class='co'># You can also convert to date-time from other clock types</span>
<span class='fu'>as_date_time</span><span class='op'>(</span><span class='fu'><a href='year_month_day.html'>year_month_day</a></span><span class='op'>(</span><span class='fl'>2019</span>, <span class='fl'>2</span>, <span class='fl'>3</span>, <span class='fl'>03</span><span class='op'>)</span>, <span class='st'>"America/New_York"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "2019-02-03 03:00:00 EST"</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Davis Vaughan, <a href='https://www.rstudio.com'><img src='https://www.tidyverse.org/rstudio-logo.svg' alt='RStudio' height='24' /></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


