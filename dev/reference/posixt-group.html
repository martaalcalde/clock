<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Group date-time components — posixt-group • clock</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Group date-time components — posixt-group"><meta property="og:description" content="This is a POSIXct/POSIXlt method for the date_group() generic.
date_group() groups by a single component of a date-time, such as month
of the year, day of the month, or hour of the day.
If you need to group by more complex components, like ISO weeks, or quarters,
convert to a calendar type that contains the component you are interested
in grouping by."><meta property="og:image" content="https://clock.r-lib.org/logo.png"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">clock</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.6.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/clock.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/motivations.html">Motivations for clock</a>
    </li>
    <li>
      <a href="../articles/faq.html">Frequently Asked Questions</a>
    </li>
    <li>
      <a href="../articles/recipes.html">Examples and Recipes</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="dropdown-header">Releases</li>
    <li>
      <a href="https://www.tidyverse.org/blog/2021/03/clock-0-1-0/" class="external-link">Version 0.1.0</a>
    </li>
    <li class="divider">
    <li>
      <a href="../news/index.html">Changelog</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/r-lib/clock/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Group date-time components</h1>
    <small class="dont-index">Source: <a href="https://github.com/r-lib/clock/blob/HEAD/R/posixt.R" class="external-link"><code>R/posixt.R</code></a></small>
    <div class="hidden name"><code>posixt-group.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This is a POSIXct/POSIXlt method for the <code><a href="date_group.html">date_group()</a></code> generic.</p>
<p><code><a href="date_group.html">date_group()</a></code> groups by a single component of a date-time, such as month
of the year, day of the month, or hour of the day.</p>
<p>If you need to group by more complex components, like ISO weeks, or quarters,
convert to a calendar type that contains the component you are interested
in grouping by.</p>
    </div>

    <div id="ref-usage">Usage,<div class="sourceCode"><pre class="sourceCode r"><code><span class="co"># S3 method for POSIXt</span>
<span class="fu"><a href="date_group.html">date_group</a></span><span class="op">(</span>
  <span class="va">x</span>,
  <span class="va">precision</span>,
  <span class="va">...</span>,
  n <span class="op">=</span> <span class="fl">1L</span>,
  invalid <span class="op">=</span> <span class="cn">NULL</span>,
  nonexistent <span class="op">=</span> <span class="cn">NULL</span>,
  ambiguous <span class="op">=</span> <span class="va">x</span>
<span class="op">)</span></code></pre></div></div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p><code>[POSIXct / POSIXlt]</code></p>
<p>A date-time vector.</p></dd>
<dt>precision</dt>
<dd><p><code>[character(1)]</code></p>
<p>One of:</p><ul><li><p><code>"year"</code></p></li>
<li><p><code>"month"</code></p></li>
<li><p><code>"day"</code></p></li>
<li><p><code>"hour"</code></p></li>
<li><p><code>"minute"</code></p></li>
<li><p><code>"second"</code></p></li>
</ul></dd>
<dt>...</dt>
<dd><p>These dots are for future extensions and must be empty.</p></dd>
<dt>n</dt>
<dd><p><code>[positive integer(1)]</code></p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p></dd>
<dt>invalid</dt>
<dd><p><code>[character(1) / NULL]</code></p>
<p>One of the following invalid date resolution strategies:</p><ul><li><p><code>"previous"</code>: The previous valid instant in time.</p></li>
<li><p><code>"previous-day"</code>: The previous valid day in time, keeping the time of
day.</p></li>
<li><p><code>"next"</code>: The next valid instant in time.</p></li>
<li><p><code>"next-day"</code>: The next valid day in time, keeping the time of day.</p></li>
<li><p><code>"overflow"</code>: Overflow by the number of days that the input is invalid
by. Time of day is dropped.</p></li>
<li><p><code>"overflow-day"</code>: Overflow by the number of days that the input is
invalid by. Time of day is kept.</p></li>
<li><p><code>"NA"</code>: Replace invalid dates with <code>NA</code>.</p></li>
<li><p><code>"error"</code>: Error on invalid dates.</p></li>
</ul><p>Using either <code>"previous"</code> or <code>"next"</code> is generally recommended, as these
two strategies maintain the <em>relative ordering</em> between elements of the
input.</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>invalid</code> must be supplied and
cannot be <code>NULL</code>. This is a convenient way to make production code robust
to invalid dates.</p></dd>
<dt>nonexistent</dt>
<dd><p><code>[character / NULL]</code></p>
<p>One of the following nonexistent time resolution strategies, allowed to be
either length 1, or the same length as the input:</p><ul><li><p><code>"roll-forward"</code>: The next valid instant in time.</p></li>
<li><p><code>"roll-backward"</code>: The previous valid instant in time.</p></li>
<li><p><code>"shift-forward"</code>: Shift the nonexistent time forward by the size of
the daylight saving time gap.</p></li>
<li><p><code>"shift-backward</code>: Shift the nonexistent time backward by the size of
the daylight saving time gap.</p></li>
<li><p><code>"NA"</code>: Replace nonexistent times with <code>NA</code>.</p></li>
<li><p><code>"error"</code>: Error on nonexistent times.</p></li>
</ul><p>Using either <code>"roll-forward"</code> or <code>"roll-backward"</code> is generally
recommended over shifting, as these two strategies maintain the
<em>relative ordering</em> between elements of the input.</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>nonexistent</code> must be supplied
and cannot be <code>NULL</code>. This is a convenient way to make production code
robust to nonexistent times.</p></dd>
<dt>ambiguous</dt>
<dd><p><code>[character / zoned_time / POSIXct / list(2) / NULL]</code></p>
<p>One of the following ambiguous time resolution strategies, allowed to be
either length 1, or the same length as the input:</p><ul><li><p><code>"earliest"</code>: Of the two possible times, choose the earliest one.</p></li>
<li><p><code>"latest"</code>: Of the two possible times, choose the latest one.</p></li>
<li><p><code>"NA"</code>: Replace ambiguous times with <code>NA</code>.</p></li>
<li><p><code>"error"</code>: Error on ambiguous times.</p></li>
</ul><p>Alternatively, <code>ambiguous</code> is allowed to be a zoned_time (or POSIXct) that
is either length 1, or the same length as the input. If an ambiguous time
is encountered, the zoned_time is consulted. If the zoned_time corresponds
to a naive_time that is also ambiguous <em>and</em> uses the same daylight saving
time transition point as the original ambiguous time, then the offset of
the zoned_time is used to resolve the ambiguity. If the ambiguity cannot be
resolved by consulting the zoned_time, then this method falls back to
<code>NULL</code>.</p>
<p>Finally, <code>ambiguous</code> is allowed to be a list of size 2, where the first
element of the list is a zoned_time (as described above), and the second
element of the list is an ambiguous time resolution strategy to use when
the ambiguous time cannot be resolved by consulting the zoned_time.
Specifying a zoned_time on its own is identical to <code>list(&lt;zoned_time&gt;, NULL)</code>.</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>ambiguous</code> must be supplied and
cannot be <code>NULL</code>. Additionally, <code>ambiguous</code> cannot be specified as a
zoned_time on its own, as this implies <code>NULL</code> for ambiguous times that the
zoned_time cannot resolve. Instead, it must be specified as a list
alongside an ambiguous time resolution strategy as described above. This is
a convenient way to make production code robust to ambiguous times.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p><code>x</code>, grouped at <code>precision</code>.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"2019-01-01"</span>, <span class="st">"America/New_York"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="clock-arithmetic.html">add_days</a></span><span class="op">(</span><span class="va">x</span>, <span class="op">-</span><span class="fl">3</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Group by 2 days of the current month.</span></span>
<span class="r-in"><span class="co"># Note that this resets at the beginning of the month, creating day groups</span></span>
<span class="r-in"><span class="co"># of [29, 30] [31] [01, 02] [03, 04].</span></span>
<span class="r-in"><span class="fu"><a href="date_group.html">date_group</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"day"</span>, n <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2018-12-29 EST" "2018-12-29 EST" "2018-12-31 EST" "2019-01-01 EST"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "2019-01-01 EST" "2019-01-03 EST" "2019-01-03 EST" "2019-01-05 EST"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [9] "2019-01-05 EST"</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Group by month</span></span>
<span class="r-in"><span class="fu"><a href="date_group.html">date_group</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"month"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2018-12-01 EST" "2018-12-01 EST" "2018-12-01 EST" "2019-01-01 EST"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "2019-01-01 EST" "2019-01-01 EST" "2019-01-01 EST" "2019-01-01 EST"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [9] "2019-01-01 EST"</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Group by hour of the day</span></span>
<span class="r-in"><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"2019-12-30"</span>, <span class="st">"America/New_York"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="clock-arithmetic.html">add_hours</a></span><span class="op">(</span><span class="va">y</span>, <span class="fl">0</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span></span>
<span class="r-in"><span class="va">y</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "2019-12-30 00:00:00 EST" "2019-12-30 01:00:00 EST"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3] "2019-12-30 02:00:00 EST" "2019-12-30 03:00:00 EST"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5] "2019-12-30 04:00:00 EST" "2019-12-30 05:00:00 EST"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "2019-12-30 06:00:00 EST" "2019-12-30 07:00:00 EST"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "2019-12-30 08:00:00 EST" "2019-12-30 09:00:00 EST"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] "2019-12-30 10:00:00 EST" "2019-12-30 11:00:00 EST"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] "2019-12-30 12:00:00 EST"</span>
<span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="date_group.html">date_group</a></span><span class="op">(</span><span class="va">y</span>, <span class="st">"hour"</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "2019-12-30 00:00:00 EST" "2019-12-30 00:00:00 EST"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3] "2019-12-30 00:00:00 EST" "2019-12-30 03:00:00 EST"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5] "2019-12-30 03:00:00 EST" "2019-12-30 03:00:00 EST"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "2019-12-30 06:00:00 EST" "2019-12-30 06:00:00 EST"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "2019-12-30 06:00:00 EST" "2019-12-30 09:00:00 EST"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] "2019-12-30 09:00:00 EST" "2019-12-30 09:00:00 EST"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] "2019-12-30 12:00:00 EST"</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Davis Vaughan, <a href="https://www.rstudio.com" class="external-link"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" width="72"></a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.0.</p>
</div>

      </footer></div>

  


  

  </body></html>

